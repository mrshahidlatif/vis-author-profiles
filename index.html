<!DOCTYPE html>
<meta charset="utf-8">
<html>
<head>
  <link rel="stylesheet" href="style.css">
  <script src="lib/d3.v5.js"></script>
  <script src="lib/jquery-3.3.1.js"></script>
  <script src="lib/jquery-ui.js"></script>
  <script type="text/javascript"  src="adata.js"></script>
  <script type="text/javascript"  src="pdata.js"></script>
  <script type="text/javascript"  src="loadJsonData.js"></script>
  <script type="text/javascript"  src="process.js"></script>
  <script type="text/javascript"  src="nlg.js"></script>
  <script type="text/javascript"  src="venue_keywords.js"></script>
  <script type="text/javascript"  src="subfields_community.js"></script>
  <script type="text/javascript"  src="author_keywords.js"></script>
  <script type="text/javascript"  src="author_venue_keywords.js"></script>
  <script type="text/javascript"  src="title_keywords.js"></script>
  <script type="text/javascript"  src="dictionary.js"></script>
  <script type="text/javascript"  src="author_autocomplete.js"></script>
  <script type="text/javascript"  src="visualization.js"></script>

  
  <title id="pageTitle">VAP</title>
</head>
<body>
    <div class="topnav">

       <!-- <img id="logo" src="logo.svg" srcset="logo.svg"> -->
       <div id="logo"> 
           <object width="90" height="30" type="image/svg+xml" data="logo.svg">
          </object>
        </div>
       <div class="autocomplete">
          <input id="myInput" type="text" name="myCountry" placeholder="Search a VIS author" autocomplete="off">
       </div>
       <input id="srchbtn" type="submit" value="Search">
    
  </div>
  
  <div class="header">
    <div class="rowHeader">
       <div class="leftcolumnHeader" >
        <div class="title" id="name"  style="display: table-cell; vertical-align: middle;">VIS Author Profiles</div>
       </div>
       <div class="rightcolumnHeader">
        <div class="infoHead" id="info"></div>
       </div>
      </div>
    
  </div>

  <div class="row">
    <div class="leftcolumn">
      <p id="bio">
        <b>VIS Author Profiles</b> describes publication records of authors from the visualization community in the form of interactive reports that combine automatically generated text and visualizations. The profiles are based on data from <a href="http://dblp.uni-trier.de/" target="_blank">DBLP</a>, the <a href="http://www.vispubdata.org/site/vispubdata/" target="_blank">Visualization Publication Data Collection</a>, and <a href="http://keyvis.org/expert.php" target="_blank">KeyVis</a>.
      </p>
      <p id="rtopics">
        Every author has an individual profile page. Type an author name in the search box, start with a <a id="r" href="#">random author profile</a>, or select one of the most frequent contributors of the visualization community. 
      </p>
      <p id="collRelation"></p>

      <br>
      <!-- <svg width="330" height="200" id="CollabChart1"></svg>
      <svg width="330" height="200" id="CollabChart2"></svg> -->

      <svg  id="CollabChart1"></svg>
    </div>
    <div class="rightcolumn">
          <p id=dod> </p>
    </div>
  </div>
  <script>

     autocomplete(document.getElementById("myInput"), authors_list);
     // loadJSON("pubdata.json", function(response) {
     //    pdata = JSON.parse(response);

     // loadJSON("authordata.json", function(response) {
     //    adata = JSON.parse(response);
       
        // console.log(pdata);
        // console.log(adata); 

        //var name = "";
          var l=3;
          var u=8;

        //Reading authorname from url and loading the profile
        //URL PARAMETERS 
        function getParameterByName(name, url) {
            if (!url) url = window.location.href;
            name = name.replace(/[\[\]]/g, "\\$&");
            var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, " "));
        }
        var author_name_param = getParameterByName('name');
        console.log(author_name_param);

          document.getElementById('r').addEventListener('click', function(){
            var random_name = authors_list[Math.floor(Math.random() * authors_list.length)];
            process(pdata, adata, random_name , "CollabChart1",l,u,1);
          }); 

          document.getElementById('myInput').onkeydown = function(event) {
            if (event.keyCode == 13) {
                var sss = document.getElementById("myInput").value;
                search(pdata, adata); 
            }
          }
     
    
          document.getElementById('srchbtn').addEventListener('click', function(){
              search(pdata, adata);
          }); 
        

       // console.log(author_name_param);
        
        if(author_name_param != null){
            process(pdata, adata, author_name_param,"CollabChart1",l,u); 
        }

        function search(pdata, adata){
          // name = document.getElementById("search").value;
          name = document.getElementById("myInput").value;
          document.getElementById("myInput").value = "";
          process(pdata, adata, name,"CollabChart1",l,u); 
        }
  //     });
  // });
  </script>
</body>

</html> 